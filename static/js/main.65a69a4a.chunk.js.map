{"version":3,"sources":["components/Common/FormsControls/FormsControls.module.css","utils/Validators/validators.ts","assets/img/Interwind-1s-200px.svg","components/Common/Preloader/Preloader.tsx","components/Common/Pagination/Pagination.module.css","api/profileAPI.ts","redux/profileReducer.ts","api/authAPI.ts","reportWebVitals.ts","components/News/News.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","api/securityAPI.ts","redux/auth-reducer.ts","components/Login/Login.tsx","redux/app-reducer.ts","redux/sidebarReducer.ts","hoc/objectsHelpers.ts","api/usersAPI.ts","redux/usersReducer.ts","redux/reduxStore.ts","hoc/withSuspense.tsx","redux/users-selectors.ts","components/Common/Pagination/Pagination.tsx","components/Users/User.tsx","components/Users/UsersSearchForm.tsx","components/Users/Users.tsx","components/Users/UsersContainer.tsx","redux/authSelectors.ts","components/Header/Header.tsx","App.tsx","index.tsx","redux/dialogsReducer.ts","assets/img/image.jpg","api/chatAPI.ts","redux/chatReducer.ts","components/Users/users.module.css","api/api.ts","components/Common/FormsControls/FormsControls.tsx"],"names":["module","exports","required","value","maxLengthCreator","maxLength","length","PreLoader","style","background","src","preLoader","alt","profileAPI","userId","instance","get","then","res","data","status","put","photoFile","formData","FormData","append","headers","profile","initialState","posts","id","message","likesCount","newPostText","actions","addPostAction","type","setUserProfile","setStatus","deletePost","postId","savePhotoSuccess","photos","getUserProfile","dispatch","a","getStatus","updateStatus","resultCode","savePhoto","file","saveProfile","getState","auth","Error","stopSubmit","_error","messages","Promise","reject","profileReducer","state","action","newPost","filter","p","ResultCodeEnum","ResultCodeEnumWithCaptcha","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","News","Music","Settings","authAPI","response","email","password","rememberMe","captcha","post","delete","securityAPI","login","isAuth","captchaUrl","payload","getCaptchaURL","url","authReducer","LoginReduxForm","reduxForm","form","handleSubmit","error","onSubmit","CreateField","MyInput","CheckboxItem","className","s","formSummaryError","htmlType","connect","loginData","console","log","Success","CaptchaIsRequired","props","to","initialized","globalError","appReducer","friends","name","imgUrl","sidebarReducer","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","usersAPI","getUsers","currentPage","pageSize","term","friend","follow","unfollow","users","totalUserCount","isFetching","followingInProgress","count","requestUsers","page","totalCount","_followUnfollowFlow","apiMethod","actionCreator","ResultCodesEnum","getUsersFilter","usersPage","usersReducer","followed","rootReducer","combineReducers","profilePage","dialogsPage","dialogsReducer","sidebar","formReducer","app","chat","chatReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","__store__","withSuspense","WrappedComponent","fallback","createSelector","getPageSize","getTotalUserCount","getCurrentPage","getIsFetching","getFollowingInProgress","Pagination","portionSize","onPageChanged","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","cn","paginator","onClick","selectedPage","pageNumber","User","user","small","userPhoto","usersPhoto","disabled","some","UsersSearchFormValidate","values","UsersSearchForm","React","memo","useSelector","enableReinitialize","initialValues","String","validate","setSubmitting","onFilterChanged","isSubmitting","as","Users","useDispatch","history","useHistory","useEffect","parsed","queryString","location","search","actualFilter","actualPage","Number","query","pathname","Follow","bind","Unfollow","UsersContainer","pageTitle","selectIsAuth","selectCurrentUserLogin","AppHeader","Dispatch","theme","mode","defaultSelectedKeys","span","Item","backgroundColor","icon","UserOutlined","DialogsContainer","lazy","ProfileContainer","ChatPage","SuspendedDialogs","SuspendedProfile","ChatPageSuspended","App","this","initializeApp","padding","margin","width","height","title","LaptopOutlined","NotificationOutlined","minHeight","exact","render","path","component","LoginPage","textAlign","Component","AppContainer","withRouter","promise","all","SamuraiJSApp","ReactDOM","document","getElementById","dialogs","addDialogAction","newMessageBody","deleteDialog","dialogId","newDialogText","subscribers","ws","notifySubscribersAboutStatus","forEach","closeHandler","setTimeout","createChannel","messageHandler","e","newMessages","JSON","parse","openHandler","errorHandler","cleanUp","removeEventListener","close","WebSocket","addEventListener","chatAPI","eventName","callback","send","_newMessageHandler","newMessageHandlerCreator","_statusChangedHandler","statusChangedHandlerCreator","startMessagesListening","stopMessagesListening","sendMessage","m","v1","index","array","ResultCodeForCapcthaEnum","axios","create","withCredentials","baseURL","FormControl","meta","touched","children","hasError","formControl","TextArea","input","restProps","placeholder","validators","text"],"mappings":"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","file":"static/js/main.65a69a4a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__2tF9a\",\"error\":\"FormsControls_error__1Le6c\",\"formSummaryError\":\"FormsControls_formSummaryError__ncVjY\"};","export type FieldValidatorType = (value: string) => string | undefined;\n\nexport const required: FieldValidatorType = (value) => {\n  if (value) return undefined;\n  return \"field is required\";\n};\n\nexport const maxLengthCreator = (maxLength: number): FieldValidatorType => (\n  value\n) => {\n  if (value.length > maxLength) return `Max length is ${maxLength} symbols`;\n  return undefined;\n};\n","export default __webpack_public_path__ + \"static/media/Interwind-1s-200px.893cc692.svg\";","import React from \"react\";\r\nimport preLoader from \"../../../assets/img/Interwind-1s-200px.svg\"\r\n\r\n\r\nlet PreLoader = () => {\r\n  return  <div>\r\n        <img style={{background:\"white\"}} src={preLoader} alt=\"PreLoader\"/>\r\n    </div>\r\n}\r\n\r\nexport default PreLoader","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPhoto\":\"Pagination_usersPhoto__3Ytun\",\"selectedPage\":\"Pagination_selectedPage__2b5JI\",\"paginator\":\"Pagination_paginator__3iJGL\",\"pageNumber\":\"Pagination_pageNumber__GplP_\"};","import { PhotosType, ProfileType } from \"../types/types\";\nimport { instance, APIResponseType } from \"./api\";\n\ntype SavePhotoResponseDataType = {\n  photos: PhotosType;\n};\n\nexport const profileAPI = {\n  getProfile(userId: number) {\n    return instance\n      .get<ProfileType>(`profile/` + userId)\n      .then((res) => res.data);\n  },\n  getStatus(userId: number) {\n    return instance\n      .get<string>(`profile/status/` + userId)\n      .then((res) => res.data);\n  },\n  updateStatus(status: string) {\n    return instance\n      .put<APIResponseType>(`profile/status`, { status: status })\n      .then((res) => res.data);\n  },\n  savePhoto(photoFile: File) {\n    const formData = new FormData();\n    formData.append(\"image\", photoFile);\n\n    return instance\n      .put<APIResponseType<SavePhotoResponseDataType>>(\n        `profile/photo`,\n        formData,\n        {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n          },\n        }\n      )\n      .then((res) => res.data);\n  },\n  saveProfile(profile: ProfileType) {\n    return instance\n      .put<APIResponseType>(`profile`, profile)\n      .then((res) => res.data);\n  },\n};\n","import { FormAction, stopSubmit } from \"redux-form\";\nimport { PhotosType, PostType, ProfileType } from \"../types/types\";\nimport { profileAPI } from \"../api/profileAPI\";\nimport store, { BaseThunkType, InferActionsTypes } from \"./reduxStore\";\n\nlet initialState = {\n  posts: [\n    { id: 1, message: \"Hi, how are you?\", likesCount: 12 },\n    { id: 2, message: \"It's my first post\", likesCount: 11 },\n    { id: 3, message: \"Blabla\", likesCount: 11 },\n    { id: 4, message: \"Dada\", likesCount: 11 },\n  ] as Array<PostType>,\n  profile: null as ProfileType | null,\n  status: \"\",\n  newPostText: \"\",\n};\n\nconst profileReducer = (\n  state = initialState,\n  action: ActionsType\n): InitialStateType => {\n  switch (action.type) {\n    case \"SN/PROFILE/ADD-POST\": {\n      let newPost = {\n        id: 5,\n        message: action.newPostText,\n        likesCount: 0,\n      };\n      return {\n        ...state,\n        posts: [...state.posts, newPost],\n      };\n    }\n    case \"SN/PROFILE/SET_STATUS\": {\n      return {\n        ...state,\n        status: action.status,\n      };\n    }\n    case \"SN/PROFILE/SET_USER_PROFILE\": {\n      return { ...state, profile: action.profile };\n    }\n\n    case \"SN/PROFILE/DELETE_POST\":\n      return {\n        ...state,\n        posts: state.posts.filter((p) => p.id != action.postId),\n      };\n\n    case \"SN/PROFILE/SAVE_PHOTO_SUCCESS\":\n      return {\n        ...state,\n        profile: { ...state.profile, photos: action.photos } as ProfileType,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const actions = {\n  addPostAction: (newPostText: string) =>\n    ({ type: \"SN/PROFILE/ADD-POST\", newPostText } as const),\n  setUserProfile: (profile: ProfileType) =>\n    ({ type: \"SN/PROFILE/SET_USER_PROFILE\", profile } as const),\n  setStatus: (status: string) =>\n    ({ type: \"SN/PROFILE/SET_STATUS\", status } as const),\n  deletePost: (postId: number) =>\n    ({ type: \"SN/PROFILE/DELETE_POST\", postId } as const),\n  savePhotoSuccess: (photos: PhotosType) =>\n    ({ type: \"SN/PROFILE/SAVE_PHOTO_SUCCESS\", photos } as const),\n};\n\nexport const getUserProfile = (userId: number): ThunkType => async (\n  dispatch\n) => {\n  const data = await profileAPI.getProfile(userId);\n  dispatch(actions.setUserProfile(data));\n};\n\nexport const getStatus = (userId: number): ThunkType => async (dispatch) => {\n  let data = await profileAPI.getStatus(userId);\n  dispatch(actions.setStatus(data));\n};\n\nexport const updateStatus = (status: string): ThunkType => async (dispatch) => {\n  try {\n    let data = await profileAPI.updateStatus(status);\n\n    if (data.resultCode === 0) {\n      dispatch(actions.setStatus(status));\n    }\n  } catch (error) {\n    //\n  }\n};\n\nexport const savePhoto = (file: File): ThunkType => async (dispatch) => {\n  let data = await profileAPI.savePhoto(file);\n\n  if (data.resultCode === 0) {\n    dispatch(actions.savePhotoSuccess(data.data.photos));\n  }\n};\n\nexport const saveProfile = (profile: ProfileType): ThunkType => async (\n  dispatch,\n  getState\n) => {\n  const userId = getState().auth.userId;\n  const data = await profileAPI.saveProfile(profile);\n\n  if (data.resultCode === 0) {\n    if (userId != null) {\n      dispatch(getUserProfile(userId));\n    } else {\n      throw new Error(\"userId can't be null\");\n    }\n  } else {\n    dispatch(stopSubmit(\"edit-profile\", { _error: data.messages[0] }));\n    return Promise.reject(data.messages[0]);\n  }\n};\n\nexport default profileReducer;\n\nexport type InitialStateType = typeof initialState;\ntype ActionsType = InferActionsTypes<typeof actions>;\ntype ThunkType = BaseThunkType<ActionsType | FormAction>;\n","import { instance, APIResponseType } from \"./api\";\n\nexport enum ResultCodeEnum {\n  Success = 0,\n  Error = 1,\n}\nexport enum ResultCodeEnumWithCaptcha {\n  CaptchaIsRequired = 10,\n}\n\nexport type MeResponseType = {\n  id: number;\n  email: string;\n  login: string;\n};\n\nexport type LoginResponseType = {\n  userId: number;\n};\nexport const authAPI = {\n  me() {\n    return instance\n      .get<APIResponseType<MeResponseType>>(`auth/me`)\n      .then((response) => {\n        return response.data;\n      });\n  },\n  login(\n    email: number | null,\n    password: string,\n    rememberMe?: string | null,\n    captcha: null | string = null\n  ) {\n    return instance\n      .post<\n        APIResponseType<\n          LoginResponseType,\n          ResultCodeEnumWithCaptcha & ResultCodeEnum\n        >\n      >(`auth/login`, {\n        email,\n        password,\n        rememberMe,\n        captcha,\n      })\n      .then((response) => response.data);\n  },\n  logout() {\n    return instance.delete(`auth/login`);\n  },\n};\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\n\r\nconst News = () => {\r\n    return (\r\n        <div>\r\n            News\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default News;","import React from \"react\";\r\n\r\nconst Music = () => {\r\n    return (\r\n        <div>\r\n            Music\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Music;","import React from \"react\";\n\nconst Settings = () => {\n  return <div>Settings</div>;\n};\n\nexport default Settings;\n","import { AxiosResponse } from \"axios\";\nimport { instance } from \"./api\";\n\ntype GetCaptchaUrlResponseType = {\n  url: string;\n};\n\nexport const securityAPI = {\n  getCaptcha() {\n    return instance\n      .get<GetCaptchaUrlResponseType>(`security/get-captcha-url`)\n      .then((response: AxiosResponse<any>) => {\n        return response.data;\n      });\n  },\n};\n","import { stopSubmit } from \"redux-form\";\nimport {\n  authAPI,\n  ResultCodeEnum,\n  ResultCodeEnumWithCaptcha,\n} from \"../api/authAPI\";\nimport { securityAPI } from \"../api/securityAPI\";\nimport store, { BaseThunkType, InferActionsTypes } from \"./reduxStore\";\nimport { ProfileType } from \"../types/types\";\nimport { profileAPI } from \"../api/profileAPI\";\nimport { ResultCodesEnum } from \"../api/api\";\n\nlet initialState = {\n  userId: null as number | null,\n  email: null as string | null,\n  login: null as string | null,\n  isAuth: false,\n  captchaUrl: null as string | null, // if null, then captcha is not required\n};\n\nexport const actions = {\n  setAuthUserDataSuccess: (\n    userId: number | null,\n    email: string | null,\n    login: string | null,\n    isAuth: boolean\n  ) =>\n    ({\n      type: \"SN/auth/SET_USER_DATA\",\n      payload: { email, userId, login, isAuth },\n    } as const),\n  getCaptchaURLSuccess: (captchaUrl: string) =>\n    ({\n      type: \"SN/auth/GET_CAPTCHA_URL_SUCCESS\",\n      payload: { captchaUrl },\n    } as const),\n};\n\nconst authReducer = (\n  state = initialState,\n  action: ActionsType\n): initialStateType => {\n  switch (action.type) {\n    case \"SN/auth/SET_USER_DATA\":\n    case \"SN/auth/GET_CAPTCHA_URL_SUCCESS\":\n      return {\n        ...state,\n        ...action.payload,\n      };\n  }\n  return state;\n};\n\nexport const setAuthUserData = (): AuthThunk => async (dispatch) => {\n  let data = await authAPI.me();\n  if (data.resultCode === ResultCodesEnum.Success) {\n    let { email, id, login } = data.data;\n    dispatch(actions.setAuthUserDataSuccess(id, email, login, true));\n  }\n};\n\nexport const login = (\n  email: number | null,\n  password: string,\n  rememberMe: string | null,\n  captcha: null | undefined\n): AuthThunk => async (dispatch) => {\n  let loginData = await authAPI.login(email, password, rememberMe, captcha);\n  console.log(loginData.resultCode);\n  if (loginData.resultCode === ResultCodeEnum.Success) {\n    dispatch(actions.setAuthUserDataSuccess(email, password, rememberMe, true));\n  } else {\n    if (loginData.resultCode === ResultCodeEnumWithCaptcha.CaptchaIsRequired) {\n      await dispatch(getCaptchaURL());\n    }\n    let message =\n      loginData.messages.length > 0 ? loginData.messages[0] : \"Some Error\";\n    dispatch(stopSubmit(\"login\", { _error: message }));\n  }\n};\n\nexport const getCaptchaURL = (): AuthThunk => async (dispatch) => {\n  let response = await securityAPI.getCaptcha();\n  const captchaUrl = response.url;\n  dispatch(actions.getCaptchaURLSuccess(captchaUrl));\n};\n\nexport const logout = (): AuthThunk => async (dispatch) => {\n  let response = await authAPI.logout();\n\n  if (response.data.resultCode === 0) {\n    dispatch(actions.setAuthUserDataSuccess(null, null, null, false));\n  }\n};\n\n//\n// export const setIsFetching = (isFetching: boolean) => (\n//     {type: TOGGLE_IS_FETCHING, isFetching}\n// )\nexport type initialStateType = typeof initialState;\ntype AuthThunk = BaseThunkType<ActionsType | ReturnType<typeof stopSubmit>>;\ntype ActionsType = InferActionsTypes<typeof actions>;\nexport default authReducer;\n","import React from \"react\";\nimport { Field, InjectedFormProps, reduxForm } from \"redux-form\";\nimport {\n  CheckboxItem,\n  CreateField,\n  GetStringKeys,\n  MyInput,\n} from \"../Common/FormsControls/FormsControls\";\nimport { required } from \"../../utils/Validators/validators\";\nimport { connect } from \"react-redux\";\nimport { login } from \"../../redux/auth-reducer\";\nimport { Redirect } from \"react-router-dom\";\nimport s from \"../Common/FormsControls/FormsControls.module.css\";\nimport { StateType } from \"../../redux/reduxStore\";\nimport { Button } from \"antd\";\n\ntype LoginFormOwnProps = {\n  captchaUrl: string | null;\n};\n\nconst LoginForm: React.FC<\n  InjectedFormProps<LoginFormValuesType, LoginFormOwnProps> & LoginFormOwnProps\n> = ({ handleSubmit, error, captchaUrl, ...restProps }) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      {CreateField<LoginFormValuesTypeKeys>(\n        \"email\",\n        \"email\",\n        [required],\n        MyInput,\n        { type: \"text\" }\n      )}\n      {CreateField<LoginFormValuesTypeKeys>(\n        \"password\",\n        \"password\",\n        [required],\n        MyInput,\n        {\n          type: \"password\",\n        }\n      )}\n      {CreateField<LoginFormValuesTypeKeys>(\n        \"\",\n        \"rememberMe\",\n        [],\n        CheckboxItem,\n        { type: \"checkbox\" },\n        \"remember Me\"\n      )}\n\n      {captchaUrl && <img src={captchaUrl} alt=\"\" />}\n      {captchaUrl &&\n        CreateField<LoginFormValuesTypeKeys>(\n          \"Symbols from image\",\n          \"captcha\",\n          [required],\n          MyInput,\n          {}\n        )}\n\n      {error && <div className={s.formSummaryError}>{error}</div>}\n      <div>\n        <Button type=\"primary\" htmlType=\"submit\">\n          Login\n        </Button>\n      </div>\n    </form>\n  );\n};\n\nconst LoginReduxForm = reduxForm<LoginFormValuesType, LoginFormOwnProps>({\n  form: \"login\",\n})(LoginForm);\n\ntype MapStatePropsType = {\n  captchaUrl: string | null;\n  isAuth: boolean;\n};\ntype MapDispatchPropsType = {\n  login: (\n    email: number | null,\n    password: string,\n    rememberMe: string | null,\n    captcha: null | undefined\n  ) => void;\n};\n\nexport type LoginFormValuesType = {\n  captcha: null | undefined;\n  rememberMe: string | null;\n  password: string;\n  email: number | null;\n};\n\ntype LoginFormValuesTypeKeys = GetStringKeys<LoginFormValuesType>;\n\nconst Login: React.FC<MapStatePropsType & MapDispatchPropsType> = (props) => {\n  const onSubmit = (formData: LoginFormValuesType) => {\n    props.login(\n      formData.email,\n      formData.password,\n      formData.rememberMe,\n      formData.captcha\n    );\n  };\n\n  if (props.isAuth) {\n    return <Redirect to={\"/profile\"} />;\n  }\n\n  return (\n    <div>\n      <h1>Login</h1>\n      <LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl} />\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: StateType): MapStatePropsType => ({\n  captchaUrl: state.auth.captchaUrl,\n  isAuth: state.auth.isAuth,\n});\n\nexport default connect(mapStateToProps, { login })(Login);\n","import { setAuthUserData } from \"./auth-reducer\";\nimport { ThunkAction } from \"redux-thunk\";\nimport { DispatchType, IActionRecucerType } from \"../types/types\";\n\nimport { BaseThunkType, InferActionsTypes } from \"./reduxStore\";\n\ntype InitialStateType = typeof initialState;\n\nlet initialState = {\n  initialized: false,\n  globalError: null,\n};\ntype ActionsType = InferActionsTypes<typeof actions>;\n\ntype ThunkAppType = BaseThunkType<ActionsType>;\n\nconst appReducer = (\n  state = initialState,\n  action: ActionsType\n): InitialStateType => {\n  switch (action.type) {\n    case \"SN/APP/SET_INITIALIZED_SUCCESS\":\n      return {\n        ...state,\n        initialized: true,\n      };\n  }\n  return state;\n};\n\nexport const actions = {\n  initializedSuccess: () => ({\n    type: \"SN/APP/SET_INITIALIZED_SUCCESS\",\n  }),\n};\n\nexport const initializeApp = () => {\n  return (dispatch: any) => {\n    let promise = dispatch(setAuthUserData());\n    Promise.all([promise]).then(() => {\n      dispatch(actions.initializedSuccess());\n    });\n  };\n};\n\nexport default appReducer;\n","import { IActionRecucerType } from \"../types/types\";\ntype initialStateType = typeof initialState;\nconst initialState = {\n  friends: [\n    {\n      id: 1,\n      name: \"Kiril\",\n      imgUrl:\n        \"https://thatshelf.com/wp-content/uploads/2020/08/ava-jessica-chastain.jpg\",\n    },\n    {\n      id: 2,\n      name: \"Ivan\",\n      imgUrl:\n        \"https://thatshelf.com/wp-content/uploads/2020/08/ava-jessica-chastain.jpg\",\n    },\n    {\n      id: 3,\n      name: \"Petrovich\",\n      imgUrl:\n        \"https://thatshelf.com/wp-content/uploads/2020/08/ava-jessica-chastain.jpg\",\n    },\n  ],\n};\n\nconst sidebarReducer = (\n  state = initialState,\n  action: IActionRecucerType\n): initialStateType => {\n  return state;\n};\n\nexport default sidebarReducer;\n","export const updateObjectInArray = (\n  items: any,\n  itemId: any,\n  objPropName: any,\n  newObjProps: any\n) => {\n  return items.map((u: any) => {\n    if (u[objPropName] === itemId) {\n      return { ...u, ...newObjProps };\n    }\n    return u;\n  });\n};\n","import { GetItemsType, instance, APIResponseType } from \"./api\";\n\nexport const usersAPI = {\n  getUsers(\n    currentPage = 1,\n    pageSize = 10,\n    term: string = \"\",\n    friend: null | boolean = null\n  ) {\n    return instance\n      .get<GetItemsType>(\n        `users?page=${currentPage}&count=${pageSize}&term=${term}&friend=${friend}`\n      )\n      .then((res) => res.data);\n  },\n  follow(userId: number) {\n    return instance\n      .post<APIResponseType>(`follow/${userId}`)\n      .then((res) => res.data);\n  },\n  unfollow(userId: number) {\n    return instance\n      .delete(`follow/${userId}`)\n      .then((res) => res.data) as Promise<APIResponseType>;\n  },\n};\n","import { updateObjectInArray } from \"../hoc/objectsHelpers\";\nimport { UserType } from \"../types/types\";\nimport { Dispatch } from \"react\";\n\nimport { usersAPI } from \"../api/usersAPI\";\nimport { BaseThunkType, InferActionsTypes, StateType } from \"./reduxStore\";\nimport { APIResponseType, ResultCodesEnum } from \"../api/api\";\n\nlet initialState = {\n  users: [] as Array<UserType>,\n  pageSize: 5,\n  totalUserCount: 0,\n  currentPage: 1,\n  isFetching: true,\n  followingInProgress: [] as Array<number>,\n  filter: {\n    term: \"\",\n    friend: null as null | boolean,\n  },\n};\n\nconst usersReducer = (\n  state = initialState,\n  action: ActionsTypes\n): InitialState => {\n  switch (action.type) {\n    case \"SN/USERS/FOLLOW\":\n      return {\n        ...state,\n        users: updateObjectInArray(state.users, action.userId, \"id\", {\n          followed: true,\n        }),\n      };\n    case \"SN/USERS/UNFOLLOW\":\n      return {\n        ...state,\n        users: updateObjectInArray(state.users, action.userId, \"id\", {\n          followed: false,\n        }),\n      };\n    case \"SN/USERS/SET_USERS\":\n      return { ...state, users: action.users };\n\n    case \"SN/USERS/SET_CURRENT_PAGE\":\n      return { ...state, currentPage: action.currentPage };\n\n    case \"SN/USERS/SET_TOTAL_USERS_COUNT\":\n      return { ...state, totalUserCount: action.count };\n\n    case \"SN/USERS/TOGGLE_IS_FETCHING\":\n      return { ...state, isFetching: action.isFetching };\n\n    case \"SN/USERS/TOGGLE_FOLLOWING_PROGRESS\":\n      return {\n        ...state,\n        followingInProgress: action.isFetching\n          ? [...state.followingInProgress, action.userId]\n          : state.followingInProgress.filter((id) => id !== action.userId),\n      };\n\n    case \"SN/USERS/SET_FILTER\": {\n      return { ...state, filter: action.payload };\n    }\n  }\n  return state;\n};\n\nexport const actions = {\n  followSuccess: (userId: number) =>\n    ({\n      type: \"SN/USERS/FOLLOW\",\n      userId,\n    } as const),\n  unfollowSuccess: (userId: number) =>\n    ({\n      type: \"SN/USERS/UNFOLLOW\",\n      userId,\n    } as const),\n  setUsers: (users: Array<UserType>) =>\n    ({\n      type: \"SN/USERS/SET_USERS\",\n      users,\n    } as const),\n  setCurrentPage: (currentPage: number) =>\n    ({\n      type: \"SN/USERS/SET_CURRENT_PAGE\",\n      currentPage: currentPage,\n    } as const),\n  setFilter: (filter: FilterType) =>\n    ({ type: \"SN/USERS/SET_FILTER\", payload: filter } as const),\n  setTotalUserCount: (totalUserCount: number) =>\n    ({\n      type: \"SN/USERS/SET_TOTAL_USERS_COUNT\",\n      count: totalUserCount,\n    } as const),\n  setIsFetching: (isFetching: boolean) =>\n    ({\n      type: \"SN/USERS/TOGGLE_IS_FETCHING\",\n      isFetching,\n    } as const),\n  setFollowingProgress: (isFetching: boolean, userId: number) =>\n    ({\n      type: \"SN/USERS/TOGGLE_FOLLOWING_PROGRESS\",\n      isFetching,\n      userId,\n    } as const),\n};\n\nexport const requestUsers = (\n  page: number,\n  pageSize: number,\n  filter: FilterType\n): ThunkType => {\n  return async (dispatch, getState) => {\n    dispatch(actions.setIsFetching(true));\n    dispatch(actions.setCurrentPage(page));\n    debugger;\n    dispatch(actions.setFilter(filter));\n\n    let data = await usersAPI.getUsers(\n      page,\n      pageSize,\n      filter.term,\n      filter.friend\n    );\n\n    dispatch(actions.setIsFetching(false));\n    dispatch(actions.setUsers(data.items));\n    dispatch(actions.setTotalUserCount(data.totalCount));\n  };\n};\n\nconst _followUnfollowFlow = async (\n  dispatch: Dispatch<ActionsTypes>,\n  userId: number,\n  apiMethod: (userId: number) => Promise<APIResponseType>,\n  actionCreator: (userId: number) => ActionsTypes\n) => {\n  dispatch(actions.setFollowingProgress(true, userId));\n  let response = await apiMethod(userId);\n\n  if (response.resultCode === ResultCodesEnum.Success) {\n    dispatch(actionCreator(userId));\n  }\n  dispatch(actions.setFollowingProgress(false, userId));\n};\nexport const follow = (userId: number): ThunkType => {\n  return async (dispatch) => {\n    await _followUnfollowFlow(\n      dispatch,\n      userId,\n      usersAPI.follow.bind(usersAPI),\n      actions.followSuccess\n    );\n  };\n};\nexport const unfollow = (userId: number): ThunkType => {\n  return async (dispatch) => {\n    await _followUnfollowFlow(\n      dispatch,\n      userId,\n      usersAPI.unfollow.bind(usersAPI),\n      actions.unfollowSuccess\n    );\n  };\n};\n\nexport const getUsersFilter = (state: StateType) => {\n  return state.usersPage.filter;\n};\n\ntype ThunkType = BaseThunkType<ActionsTypes>;\ntype ActionsTypes = InferActionsTypes<typeof actions>;\nexport type InitialState = typeof initialState;\nexport type FilterType = typeof initialState.filter;\n\nexport default usersReducer;\n","import { createStore, combineReducers, applyMiddleware, Action } from \"redux\";\nimport profileReducer from \"./profileReducer\";\nimport dialogsReducer from \"./dialogsReducer\";\nimport sidebarReducer from \"./sidebarReducer\";\nimport usersReducer from \"./usersReducer\";\nimport authReducer from \"./auth-reducer\";\nimport thunkMiddleware, { ThunkAction } from \"redux-thunk\";\nimport { reducer as formReducer } from \"redux-form\";\nimport appReducer, { actions } from \"./app-reducer\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport { compose } from \"redux\";\nimport chatReducer from \"./chatReducer\";\nlet rootReducer = combineReducers({\n  profilePage: profileReducer,\n  dialogsPage: dialogsReducer,\n  sidebar: sidebarReducer,\n  usersPage: usersReducer,\n  auth: authReducer,\n  form: formReducer,\n  app: appReducer,\n  chat: chatReducer,\n});\n\n\ntype RootReducerType = typeof rootReducer; // (globalstate: AppStateType) => AppStateType\nexport type AppState = ReturnType<RootReducerType>;\nexport type StateType = ReturnType<RootReducerType>;\n\nexport type InferActionsTypes<T> = T extends {\n  [keys: string]: (...args: any[]) => infer U;\n}\n  ? U\n  : never;\n\nexport type BaseThunkType<\n  A extends Action = Action,\n  R = Promise<void>\n  > = ThunkAction<R, AppState, unknown, A>;\n\n// @ts-ignore\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  rootReducer,\n  composeEnhancers(applyMiddleware(thunkMiddleware))\n);\n// @ts-ignore\nwindow.__store__ = store;\n\nexport default store;\n","import React, { Suspense } from \"react\";\n\nexport function withSuspense<WCP>(WrappedComponent: React.ComponentType<WCP>) {\n  return (props: WCP) => {\n    return (\n      <Suspense fallback={<div>Loading.....99%</div>}>\n        <WrappedComponent {...props} />\n      </Suspense>\n    );\n  };\n}\n","import { createSelector } from \"reselect\";\nimport { StateType } from \"./reduxStore\";\n\nconst getUsersSelector = (state: StateType) => {\n  return state.usersPage.users;\n};\n\nexport const getUsers = createSelector(getUsersSelector, (users) => {\n  return users.filter((u) => true);\n});\n\nexport const getPageSize = (state: StateType) => {\n  return state.usersPage.pageSize;\n};\n\nexport const getTotalUserCount = (state: StateType) => {\n  return state.usersPage.totalUserCount;\n};\n\nexport const getCurrentPage = (state: StateType) => {\n  return state.usersPage.currentPage;\n};\n\nexport const getIsFetching = (state: StateType) => {\n  return state.usersPage.isFetching;\n};\n\nexport const getFollowingInProgress = (state: StateType) => {\n  return state.usersPage.followingInProgress;\n};\n","import React, { useState } from \"react\";\nimport s from \"./Pagination.module.css\";\nimport cn from \"classnames\";\nimport { Button } from \"antd\";\n\ntype PaginationProps = {\n  totalUserCount: number;\n  pageSize: number;\n  portionSize?: number;\n  currentPage: number;\n  onPageChanged: (pageNumber: number) => void;\n};\n\nconst Pagination: React.FC<PaginationProps> = ({\n  totalUserCount,\n  pageSize,\n  portionSize = 10,\n  currentPage,\n  onPageChanged,\n}) => {\n  let pagesCount = Math.ceil(totalUserCount / pageSize);\n  let pages: Array<number> = [];\n  for (let i = 1; i <= pagesCount; i++) {\n    pages.push(i);\n  }\n\n  const portionCount = Math.ceil(pagesCount / portionSize);\n  let [portionNumber, setPortionNumber] = useState(1);\n\n  let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\n  let rightPortionPageNumber = portionNumber * portionSize;\n\n  return (\n    <div className={cn(s.paginator)}>\n      {portionNumber > 1 && (\n        <Button\n          onClick={() => {\n            setPortionNumber(portionNumber - 1);\n          }}\n        >\n          Prev\n        </Button>\n      )}\n      {pages\n        .filter(\n          (p) => p >= leftPortionPageNumber && p <= rightPortionPageNumber\n        )\n        .map((p) => {\n          return (\n            <Button\n              type={\"primary\"}\n              className={cn(\n                { [s.selectedPage]: currentPage === p },\n                s.pageNumber\n              )}\n              onClick={() => {\n                onPageChanged(p);\n              }}\n            >\n              {\" \"}\n              {p}\n            </Button>\n          );\n        })}\n      {portionCount > portionNumber && (\n        <Button\n          onClick={() => {\n            setPortionNumber(portionNumber + 1);\n          }}\n        >\n          Next\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default Pagination;\n","import React from \"react\";\nimport s from \"./users.module.css\";\nimport userPhoto from \"../../assets/img/image.jpg\";\nimport { NavLink } from \"react-router-dom\";\nimport UsersPagination from \"../Common/Pagination/Pagination\";\nimport { UserType } from \"../../types/types\";\nimport { Button } from \"antd\";\n\ntype PropsType = {\n  user: UserType;\n  followingInProgress: Array<number>;\n  unfollow: (userId: number) => void;\n  follow: (userId: number) => void;\n};\n\nlet User: React.FC<PropsType> = ({\n  user,\n  followingInProgress,\n  unfollow,\n  follow,\n}) => {\n  return (\n    <div key={user.id}>\n      <span>\n        <div>\n          <NavLink to={\"/profile/\" + user.id}>\n            <img\n              src={user.photos.small !== null ? user.photos.small : userPhoto}\n              alt=\"#\"\n              className={s.usersPhoto}\n            />\n          </NavLink>\n        </div>\n        <div>\n          {user.followed ? (\n            <Button\n              disabled={followingInProgress.some((id: any) => id === user.id)}\n              onClick={() => {\n                unfollow(user.id);\n              }}\n            >\n              Unfollow\n            </Button>\n          ) : (\n            <Button\n              disabled={followingInProgress.some((id: any) => id === user.id)}\n              onClick={() => {\n                follow(user.id);\n              }}\n            >\n              Follow\n            </Button>\n          )}\n        </div>\n      </span>\n      <span>\n        <div>{user.name}</div>\n        <div>{user.status}</div>\n      </span>\n      <span>\n        {/*<div>{u.location.country}</div>*/}\n        {/*<div>{u.location.city}</div>*/}\n      </span>\n    </div>\n  );\n};\n\nexport default User;\n","import { Field, Form, Formik } from \"formik\";\nimport React from \"react\";\nimport { FilterType, getUsersFilter } from \"../../redux/usersReducer\";\nimport { useSelector } from \"react-redux\";\n\nconst UsersSearchFormValidate = (values: any) => {\n  const errors = {};\n  return errors;\n};\n\ntype FormType = {\n  term: string;\n  friend: FriendFormType;\n};\n\ntype UsersSearchFormType = {\n  onFilterChanged: (filter: FilterType) => void;\n};\ntype FriendFormType = \"true\" | \"false\" | \"null\";\nexport const UsersSearchForm: React.FC<UsersSearchFormType> = React.memo(\n  (props) => {\n    const filter = useSelector(getUsersFilter);\n\n    const submit = (\n      values: FormType,\n      { setSubmitting }: { setSubmitting: (setSubmitting: boolean) => void }\n    ) => {\n      const filter: FilterType = {\n        term: values.term,\n        friend:\n          values.friend === \"null\"\n            ? null\n            : values.friend === \"true\"\n            ? true\n            : false,\n      };\n      props.onFilterChanged(filter);\n      setSubmitting(false);\n    };\n\n    return (\n      <div>\n        <Formik\n          enableReinitialize={true}\n          initialValues={{\n            term: filter.term,\n            friend: String(filter.friend) as FriendFormType,\n          }}\n          validate={UsersSearchFormValidate}\n          onSubmit={submit}\n        >\n          {({ isSubmitting }) => (\n            <Form>\n              <Field type=\"text\" name=\"term\" />\n              <Field name=\"friend\" as=\"select\">\n                <option value=\"null\">All</option>\n                <option value=\"true\">Only Followed</option>\n                <option value=\"false\">Only UnFollowed</option>\n              </Field>\n              <button type=\"submit\" disabled={isSubmitting}>\n                Find\n              </button>\n            </Form>\n          )}\n        </Formik>\n      </div>\n    );\n  }\n);\n","import React, { useEffect } from \"react\";\nimport UsersPagination from \"../Common/Pagination/Pagination\";\nimport User from \"./User\";\nimport { UserType } from \"../../types/types\";\nimport { UsersSearchForm } from \"./UsersSearchForm\";\nimport {\n  FilterType,\n  follow,\n  getUsersFilter,\n  requestUsers,\n  unfollow,\n} from \"../../redux/usersReducer\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  getCurrentPage,\n  getFollowingInProgress,\n  getPageSize,\n  getTotalUserCount,\n  getUsers,\n} from \"../../redux/users-selectors\";\nimport { useHistory } from \"react-router-dom\";\nimport * as queryString from \"querystring\";\n\ntype PropsType = {};\ntype QueryParamsType = {\n  term?: string;\n  page?: string;\n  friend?: string;\n};\nlet Users: React.FC<PropsType> = () => {\n  const users = useSelector(getUsers);\n  const totalUserCount = useSelector(getTotalUserCount);\n  const currentPage = useSelector(getCurrentPage);\n  const pageSize = useSelector(getPageSize);\n  const filter = useSelector(getUsersFilter);\n  const followingInProgress = useSelector(getFollowingInProgress);\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  useEffect(() => {\n    const parsed = queryString.parse(\n      history.location.search\n    ) as QueryParamsType;\n    let actualFilter = filter;\n    let actualPage = currentPage;\n    if (parsed.page) actualPage = Number(parsed.page);\n\n    if (!!parsed.term)\n      actualFilter = { ...actualFilter, term: parsed.term as string };\n\n    // if (!!parsed.friend)\n    //   actualFilter = {\n    //     ...actualFilter,\n    //     friend:\n    //       parsed.friend === \"null\"\n    //         ? null\n    //         : parsed.friend === \"true\"\n    //         ? true\n    //         : false,\n    //   };\n    switch (parsed.friend) {\n      case \"null\": {\n        actualFilter = { ...actualFilter, friend: null };\n        break;\n      }\n      case \"true\": {\n        actualFilter = { ...actualFilter, friend: true };\n        break;\n      }\n      case \"false\": {\n        actualFilter = { ...actualFilter, friend: false };\n        break;\n      }\n    }\n    dispatch(requestUsers(actualPage, pageSize, actualFilter));\n  }, []);\n\n  useEffect(() => {\n    const query: QueryParamsType = {};\n\n    if (!!filter.term) query.term = filter.term;\n    if (filter.friend !== null) query.friend = String(filter.friend);\n    if (currentPage !== 1) query.page = String(currentPage);\n\n    history.push({\n      pathname: \"/developers\",\n      search: queryString.stringify(query),\n    });\n  }, [filter, currentPage]);\n\n  const onPageChanged = (pageNumber: number) => {\n    dispatch(requestUsers(pageNumber, pageSize, filter));\n  };\n  const onFilterChanged = (filter: FilterType) => {\n    dispatch(requestUsers(1, pageSize, filter));\n  };\n  const Follow = (userId: number) => {\n    dispatch(follow(userId));\n  };\n  const Unfollow = (userId: number) => {\n    dispatch(unfollow(userId));\n  };\n  return (\n    <div>\n      <UsersSearchForm onFilterChanged={onFilterChanged} />\n      <UsersPagination\n        totalUserCount={totalUserCount}\n        pageSize={pageSize}\n        currentPage={currentPage}\n        onPageChanged={onPageChanged}\n      />\n      <div>\n        {users.map((u) => (\n          <User\n            key={u.id}\n            user={u}\n            follow={Follow}\n            unfollow={Unfollow}\n            followingInProgress={followingInProgress}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Users;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport PreLoader from \"../Common/Preloader/Preloader\";\nimport { getIsFetching } from \"../../redux/users-selectors\";\nimport Users from \"./Users\";\n\ntype UsersPagePropsType = {\n  pageTitle: string;\n};\n\nexport const UsersContainer: React.FC<UsersPagePropsType> = (props) => {\n  const isFetching = useSelector(getIsFetching);\n  return (\n    <>\n      <h2>{props.pageTitle}</h2>\n      {isFetching ? <PreLoader /> : null}\n      <Users />\n    </>\n  );\n};\n","import { StateType } from \"./reduxStore\";\n\nexport const selectIsAuth = (state: StateType) => {\n  return state.auth.isAuth;\n};\n\nexport const selectCurrentUserLogin = (state: StateType) => {\n  return state.auth.login;\n};\n","import React from \"react\";\nimport s from \"./Header.module.css\";\nimport { Link, NavLink } from \"react-router-dom\";\nimport Menu from \"antd/lib/menu\";\nimport { Avatar, Button, Col, Row } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport Layout, { Header } from \"antd/lib/layout/layout\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  selectCurrentUserLogin,\n  selectIsAuth,\n} from \"../../redux/authSelectors\";\nimport { logout } from \"../../redux/auth-reducer\";\nimport { getUsers } from \"../../redux/users-selectors\";\nimport userPhoto from \"../../assets/img/image.jpg\";\nimport User from \"../Users/User\";\n\ntype PropsType = {};\n\nexport const AppHeader: React.FC<PropsType> = (props) => {\n  const isAuth = useSelector(selectIsAuth);\n  const login = useSelector(selectCurrentUserLogin);\n  const Dispatch = useDispatch();\n\n  const logoutResolver = () => {\n    Dispatch(logout());\n  };\n\n  return (\n    <Header className=\"header\">\n      <div className=\"logo\" />\n\n      <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={[\"2\"]}>\n        <Row>\n          <Col span={17}>\n            <Menu.Item key=\"1\">\n              {\" \"}\n              <Link to=\"/developers\">Developers</Link>\n            </Menu.Item>\n          </Col>\n\n          {isAuth ? (\n            <>\n              <Col span={1}>\n                <Avatar\n                  alt={String(login)}\n                  style={{ backgroundColor: \"#87d068\" }}\n                  icon={<UserOutlined />}\n                />\n              </Col>\n              <Col span={5}>\n                <Button onClick={logoutResolver}>Logout</Button>\n              </Col>\n            </>\n          ) : (\n            <Col span={3}>\n              <Button>\n                <NavLink to={\"/login\"}>Login</NavLink>\n              </Button>\n            </Col>\n          )}\n        </Row>\n      </Menu>\n    </Header>\n\n    // <header className={s.header}>\n    //   <img\n    //     src=\"data:image/png;base64,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\"\n    //     alt=\"\"\n    //   />\n    //\n    //   <div className={s.loginBlock}>\n    //     <div>{props.userId}</div>\n    //     {props.isAuth ? (\n    //       <div>\n    //         {props.login} = <button onClick={props.logout}>Logout</button>\n    //       </div>\n    //     ) : (\n    //       <div>\n    //         <NavLink to={\"/login\"}>Login</NavLink>\n    //       </div>\n    //     )}\n    //   </div>\n    // </header>\n  );\n};\n","import React, { ComponentType, Suspense } from \"react\";\nimport {\n  UserOutlined,\n  LaptopOutlined,\n  NotificationOutlined,\n} from \"@ant-design/icons\";\nimport \"./App.css\";\nimport \"antd/dist/antd.css\";\nimport Nav from \"./components/Navbar/Nav\";\nimport News from \"./components/News/News\";\nimport Music from \"./components/Music/Music\";\nimport Settings from \"./components/Settings/Settings\";\nimport {\n  HashRouter,\n  Link,\n  Redirect,\n  Route,\n  Switch,\n  withRouter,\n} from \"react-router-dom\";\n\nimport LoginPage from \"./components/Login/Login\";\nimport { connect, Provider } from \"react-redux\";\nimport { compose } from \"redux\";\nimport { initializeApp } from \"./redux/app-reducer\";\nimport PreLoader from \"./components/Common/Preloader/Preloader\";\nimport store, { StateType } from \"./redux/reduxStore\";\nimport { withSuspense } from \"./hoc/withSuspense\";\n\nimport { UsersContainer } from \"./components/Users/UsersContainer\";\nimport Layout, { Footer, Header } from \"antd/lib/layout/layout\";\nimport { Content } from \"antd/lib/layout/layout\";\nimport Sider from \"antd/lib/layout/Sider\";\nimport Menu from \"antd/lib/menu\";\nimport SubMenu from \"antd/lib/menu/SubMenu\";\nimport Breadcrumb from \"antd/lib/breadcrumb/Breadcrumb\";\nimport s from \"./components/Navbar/Nav.module.css\";\nimport { Avatar, Col, Image, Row } from \"antd\";\nimport { AppHeader } from \"./components/Header/Header\";\n\nconst DialogsContainer = React.lazy(\n  () => import(\"./components/Dialogs/DialogsContainer\")\n);\nconst ProfileContainer = React.lazy(\n  () => import(\"./components/Profile/ProfileContainer\")\n);\nconst ChatPage = React.lazy(() => import(\"./pages/chat/chatPage\"));\ntype MapPropsType = ReturnType<typeof mapStateToProps>;\ntype DispatchPropsType = {\n  initializeApp: () => void;\n};\n\nconst SuspendedDialogs = withSuspense(DialogsContainer);\nconst SuspendedProfile = withSuspense(ProfileContainer);\nconst ChatPageSuspended = withSuspense(ChatPage);\n\nclass App extends React.Component<MapPropsType & DispatchPropsType> {\n  // catchAllUnhandledErrors = (e: PromiseRejectionEvent) => {\n  //   alert(\"Some error occured\");\n  // };\n\n  componentDidMount() {\n    this.props.initializeApp();\n    // window.addEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors);\n  }\n\n  // componentWillUnmount() {\n  //   window.removeEventListener(\n  //     \"unhandledrejection\",\n  //     this.catchAllUnhandledErrors\n  //   );\n  // }\n\n  render() {\n    if (!this.props.initialized) {\n      return <PreLoader />;\n    }\n\n    return (\n      <Layout>\n        <AppHeader />\n        <Content style={{ padding: \"0 50px\" }}>\n          <Breadcrumb style={{ margin: \"16px 0\" }}>\n            <Breadcrumb.Item>Home</Breadcrumb.Item>\n            <Breadcrumb.Item>List</Breadcrumb.Item>\n            <Breadcrumb.Item>App</Breadcrumb.Item>\n          </Breadcrumb>\n          <Layout\n            className=\"site-layout-background\"\n            style={{ padding: \"24px 0\" }}\n          >\n            <Sider className=\"site-layout-background\" width={200}>\n              <Menu\n                mode=\"inline\"\n                defaultSelectedKeys={[\"2\"]}\n                // defaultOpenKeys={[\"sub1\"]}\n                style={{ height: \"100%\" }}\n              >\n                <SubMenu key=\"sub1\" icon={<UserOutlined />} title=\"My Profile\">\n                  <Menu.Item key=\"1\">\n                    {\" \"}\n                    <Link to=\"/profile\">Profile</Link>\n                  </Menu.Item>\n                  <Menu.Item key=\"2\">\n                    <Link to=\"/dialogs\">Messages</Link>\n                  </Menu.Item>\n                  <Menu.Item key=\"3\">\n                    {\" \"}\n                    <Link to=\"/developers\">Developers</Link>\n                  </Menu.Item>\n                  <Menu.Item key=\"4\">\n                    {\" \"}\n                    <Link to=\"/chat\">Chat</Link>\n                  </Menu.Item>\n                </SubMenu>\n                <SubMenu\n                  key=\"sub2\"\n                  icon={<LaptopOutlined />}\n                  title=\"Developers\"\n                >\n                  <Menu.Item key=\"5\">option5</Menu.Item>\n                  <Menu.Item key=\"6\">option6</Menu.Item>\n                  <Menu.Item key=\"7\">option7</Menu.Item>\n                  <Menu.Item key=\"8\">option8</Menu.Item>\n                </SubMenu>\n                <SubMenu\n                  key=\"sub3\"\n                  icon={<NotificationOutlined />}\n                  title=\"subnav 3\"\n                >\n                  <Menu.Item key=\"9\">option9</Menu.Item>\n                  <Menu.Item key=\"10\">option10</Menu.Item>\n                  <Menu.Item key=\"11\">option11</Menu.Item>\n                  <Menu.Item key=\"12\">option12</Menu.Item>\n                </SubMenu>\n              </Menu>\n            </Sider>\n            <Content style={{ padding: \"0 24px\", minHeight: 280 }}>\n              {\n                <Switch>\n                  <Route\n                    exact\n                    render={() => <Redirect to={\"/profile\"} />}\n                    path=\"/\"\n                  />\n                  <Route\n                    exact\n                    render={() => <SuspendedDialogs />}\n                    path=\"/dialogs\"\n                  />\n                  <Route\n                    exact\n                    render={() => <SuspendedProfile />}\n                    path=\"/profile/:userId?\"\n                  />\n                  <Route exact component={News} path=\"/news\" />\n                  <Route exact component={Music} path=\"/music\" />\n                  <Route exact component={Settings} path=\"/settings\" />\n                  <Route exact component={ChatPageSuspended} path=\"/chat\" />\n                  <Route\n                    exact\n                    render={() => <UsersContainer pageTitle={\"\"} />}\n                    path=\"/developers\"\n                  />\n                  <Route exact render={withSuspense(LoginPage)} path=\"/login\" />\n                  <Route\n                    exact\n                    render={() => <div>404 Not Found</div>}\n                    path=\"*\"\n                  />\n                </Switch>\n              }\n            </Content>\n          </Layout>\n        </Content>\n        <Footer style={{ textAlign: \"center\" }}>Social Network @2021</Footer>\n      </Layout>\n    );\n  }\n}\n\nconst mapStateToProps = (state: StateType) => ({\n  initialized: state.app.initialized,\n});\n\nlet AppContainer = compose<ComponentType>(\n  withRouter,\n  connect(mapStateToProps, { initializeApp })\n)(App);\n\nexport const SamuraiJSApp: React.FC = () => {\n  return (\n    <HashRouter>\n      <Provider store={store}>\n        <Suspense fallback={<div>Loading... </div>}>\n          <AppContainer />\n        </Suspense>\n      </Provider>\n    </HashRouter>\n  );\n};\n\nexport default SamuraiJSApp;\n","import React from \"react\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport SamuraiJSApp from \"./App\";\n\nReactDOM.render(<SamuraiJSApp />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { InferActionsTypes } from \"./reduxStore\";\n\ntype MessageType = {\n  id: number;\n  message: string;\n};\ntype DialogsType = {\n  id: number;\n  name: string;\n};\n\nconst initialState = {\n  messages: [\n    { id: 1, message: \"Hi\" },\n    { id: 2, message: \"How is your day?\" },\n    { id: 3, message: \"Fine, tahnks\" },\n    { id: 4, message: \"Svetlana\" },\n    { id: 5, message: \"Trysa\" },\n    { id: 6, message: \"Fine\" },\n  ] as Array<MessageType>,\n  dialogs: [\n    { id: 1, name: \"Dimich123\" },\n    { id: 2, name: \"Andrew\" },\n    { id: 3, name: \"Valera\" },\n    { id: 4, name: \"Sveta\" },\n    { id: 5, name: \"Polina\" },\n    { id: 6, name: \"Sasha\" },\n  ] as Array<DialogsType>,\n};\n\nconst dialogsReducer = (\n  state = initialState,\n  action: ActionsType\n): InitialStateType => {\n  switch (action.type) {\n    case \"SN/DIALOGS/ADD-DIALOG\": {\n      let newDialogText = action.newMessageBody;\n      return {\n        ...state,\n        messages: [...state.messages, { id: 6, message: newDialogText }],\n      };\n    }\n    case \"SN/DIALOGS/DELETE_DIALOG\": {\n      return {\n        ...state,\n        dialogs: state.dialogs.filter((p) => p.id !== action.dialogId),\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nexport const actions = {\n  addDialogAction: (newMessageBody: string) =>\n    ({\n      type: \"SN/DIALOGS/ADD-DIALOG\",\n      newMessageBody,\n    } as const),\n  deleteDialog: (dialogId: number) =>\n    ({\n      type: \"SN/DIALOGS/DELETE_DIALOG\",\n      dialogId,\n    } as const),\n};\n\ntype ActionsType = InferActionsTypes<typeof actions>;\nexport type InitialStateType = typeof initialState;\n\nexport default dialogsReducer;\n","export default __webpack_public_path__ + \"static/media/image.b6ed426e.jpg\";","let subscribers = {\n  \"message-received\": [] as MessagesReceivedSubscriberType[],\n  \"status-changed\": [] as StatusChangedSubscriberType[],\n};\ntype EventsNamesTypes = \"message-received\" | \"status-changed\";\nlet ws: WebSocket | null = null;\nconst notifySubscribersAboutStatus = (status: StatusType) => {\n  subscribers[\"status-changed\"].forEach((s) => s(status));\n};\n\nlet closeHandler = () => {\n  notifySubscribersAboutStatus(\"pending\");\n  console.log(\"CLOSE WS\");\n  setTimeout(createChannel, 3000);\n};\n\nconst messageHandler = (e: MessageEvent) => {\n  const newMessages = JSON.parse(e.data);\n  subscribers[\"message-received\"].forEach((s) => s(newMessages));\n};\nconst openHandler = () => {\n  notifySubscribersAboutStatus(\"ready\");\n};\nconst errorHandler = () => {\n  notifySubscribersAboutStatus(\"error\");\n  console.log(\"REFRESH PAGE\");\n};\nconst cleanUp = () => {\n  ws?.removeEventListener(\"close\", closeHandler);\n  ws?.removeEventListener(\"message\", messageHandler);\n  ws?.removeEventListener(\"open\", openHandler);\n  ws?.removeEventListener(\"error\", errorHandler);\n};\n\nfunction createChannel() {\n  cleanUp();\n  ws?.close();\n\n  ws = new WebSocket(\n    \"wss://social-network.samuraijs.com/handlers/ChatHandler.ashx\"\n  );\n  notifySubscribersAboutStatus(\"pending\");\n  ws?.addEventListener(\"close\", closeHandler);\n  ws?.addEventListener(\"message\", messageHandler);\n  ws?.addEventListener(\"open\", openHandler);\n  ws?.addEventListener(\"error\", errorHandler);\n}\n\nexport const chatAPI = {\n  subscribe(\n    eventName: EventsNamesTypes,\n    callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType\n  ) {\n    // @ts-ignore\n    subscribers[eventName].push(callback);\n    return () => {\n      // @ts-ignore\n      subscribers = subscribers[eventName].filter((s) => s !== callback);\n    };\n  },\n  unsubscribe(\n    eventName: EventsNamesTypes,\n    callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType\n  ) {\n    // @ts-ignore\n    subscribers[eventName] = subscribers[eventName].filter(\n      // @ts-ignore\n      (s) => s !== callback\n    );\n  },\n  sendMessage(message: string) {\n    ws?.send(message);\n  },\n  start() {\n    createChannel();\n  },\n  stop() {\n    subscribers[\"message-received\"] = [];\n    subscribers[\"status-changed\"] = [];\n    cleanUp();\n    ws?.close();\n  },\n};\nexport type MessagesReceivedSubscriberType = (\n  messages: ChatMessageAPIType[]\n) => void;\nexport type StatusChangedSubscriberType = (status: StatusType) => void;\nexport type ChatMessageAPIType = {\n  message: string;\n  photo: string;\n  userId: number;\n  userName: string;\n};\nexport type StatusType = \"pending\" | \"ready\" | \"error\";\n","import { chatAPI, ChatMessageAPIType, StatusType } from \"../api/chatAPI\";\nimport store, { BaseThunkType, InferActionsTypes } from \"./reduxStore\";\nimport { FormAction } from \"redux-form\";\nimport { v1 } from \"uuid\";\ntype ChatMessageType = ChatMessageAPIType & { id: string };\nlet initialState = {\n  messages: [] as ChatMessageType[],\n  status: \"pending\" as StatusType,\n};\n\nconst chatReducer = (\n  state = initialState,\n  action: ActionsTypes\n): initialStateTypes => {\n  switch (action.type) {\n    case \"SN/chat/MESSAGES_RECEIVED\":\n      return {\n        ...state,\n        messages: [\n          ...state.messages,\n          ...action.payload.messages.map((m) => ({ ...m, id: v1() })),\n        ].filter((m, index, array) => {\n          return index >= array.length - 100;\n        }),\n      };\n    case \"SN/chat/STATUS_CHANGED\":\n      return {\n        ...state,\n        status: action.payload.status,\n      };\n  }\n  return state;\n};\n\nexport const actions = {\n  messagesReceived: (messages: ChatMessageAPIType[]) =>\n    ({\n      type: \"SN/chat/MESSAGES_RECEIVED\",\n      payload: { messages },\n    } as const),\n  statusChanged: (status: StatusType) =>\n    ({\n      type: \"SN/chat/STATUS_CHANGED\",\n      payload: { status },\n    } as const),\n};\n\nlet _newMessageHandler:\n  | ((messages: ChatMessageAPIType[]) => void)\n  | null = null;\n\nconst newMessageHandlerCreator = (dispatch: typeof store.dispatch) => {\n  if (_newMessageHandler !== null) {\n    return _newMessageHandler;\n  }\n  _newMessageHandler = (messages) => {\n    dispatch(actions.messagesReceived(messages));\n  };\n  return _newMessageHandler;\n};\n\nlet _statusChangedHandler: ((status: StatusType) => void) | null = null;\n\nconst statusChangedHandlerCreator = (dispatch: typeof store.dispatch) => {\n  if (_statusChangedHandler === null) {\n    _statusChangedHandler = (status) => {\n      dispatch(actions.statusChanged(status));\n    };\n  }\n  return _statusChangedHandler;\n};\n\nexport const startMessagesListening = (): AuthThunks => async (dispatch) => {\n  chatAPI.start();\n  chatAPI.subscribe(\"message-received\", newMessageHandlerCreator(dispatch));\n  chatAPI.subscribe(\"status-changed\", statusChangedHandlerCreator(dispatch));\n};\nexport const stopMessagesListening = (): AuthThunks => async (dispatch) => {\n  chatAPI.unsubscribe(\"message-received\", newMessageHandlerCreator(dispatch));\n  chatAPI.unsubscribe(\"status-changed\", statusChangedHandlerCreator(dispatch));\n  chatAPI.stop();\n};\nexport const sendMessage = (message: string): AuthThunks => async (\n  dispatch\n) => {\n  chatAPI.sendMessage(message);\n};\nexport default chatReducer;\n\ntype ActionsTypes = InferActionsTypes<typeof actions>;\nexport type initialStateTypes = typeof initialState;\ntype AuthThunks = BaseThunkType<ActionsTypes | FormAction>;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPhoto\":\"users_usersPhoto__2dH_u\",\"selectedPage\":\"users_selectedPage__enlAe\"};","import axios from \"axios\";\nimport { UserType } from \"../types/types\";\nimport { ResultCodeEnum } from \"./authAPI\";\n\nexport const instance = axios.create({\n  withCredentials: true,\n  baseURL: \"https://social-network.samuraijs.com/api/1.0\",\n  headers: {\n    \"API-KEY\": \"6b942291-e486-4917-9612-6d20f8535ae9\",\n  },\n});\n\nexport enum ResultCodesEnum {\n  Success = 0,\n  Error = 1,\n}\n\nexport enum ResultCodeForCapcthaEnum {\n  CaptchaIsRequired = 10,\n}\n\nexport type GetItemsType = {\n  items: Array<UserType>;\n  totalCount: number;\n  error: string | null;\n};\nexport type APIResponseType<\n  D = {},\n  RC = ResultCodesEnum | ResultCodeForCapcthaEnum\n> = {\n  data: D;\n  messages: Array<string>;\n  resultCode: RC;\n};\n","import React from \"react\";\nimport s from \"./FormsControls.module.css\";\nimport { FieldValidatorType } from \"../../../utils/Validators/validators\";\nimport { Field, WrappedFieldMetaProps, WrappedFieldProps } from \"redux-form\";\n\nimport { Checkbox, Input } from \"antd\";\n\ntype FormControlPropsType = {\n  meta: WrappedFieldMetaProps;\n};\n\nconst FormControl: React.FC<FormControlPropsType> = ({\n  meta: { touched, error },\n  children,\n}) => {\n  const hasError = touched && error;\n\n  return (\n    <div className={s.formControl + \" \" + (hasError ? s.error : \"\")}>\n      <div>{children}</div>\n      <span>{hasError && error}</span>\n    </div>\n  );\n};\n\nexport type TextAreaTypes = {};\n\nexport const TextArea: React.FC<WrappedFieldProps> = (props) => {\n  const { input, meta, ...restProps } = props;\n  return (\n    <FormControl {...props}>\n      <Input type=\"textarea\" {...input} {...restProps} />\n    </FormControl>\n  );\n};\n\nexport const MyInput: React.FC<WrappedFieldProps> = (props) => {\n  const { input, meta, ...restProps } = props;\n  return (\n    <FormControl {...props}>\n      <Input {...input} {...restProps} />\n    </FormControl>\n  );\n};\n\nexport const CheckboxItem = () => {\n  return (\n    <div>\n      <Checkbox />\n    </div>\n  );\n};\nexport type LoginFormPropertiesType =\n  | \"email\"\n  | \"password\"\n  | \"rememberMe\"\n  | \"captcha\"\n  | \"fullName\"\n  | \"lookingForAJob\"\n  | \"lookingForAJobDescription\"\n  | \"aboutMe\"\n  | \"contacts\"\n  | \"string\";\n\nexport function CreateField<FormKeysType extends string>(\n  placeholder: string | undefined,\n  name: FormKeysType,\n  validators: FieldValidatorType[],\n  component: React.FC<WrappedFieldProps>,\n  restProps = {},\n  text = \"\"\n) {\n  return (\n    <div>\n      <Field\n        type=\"text\"\n        validate={validators}\n        name={name}\n        placeholder={placeholder}\n        component={component}\n        {...restProps}\n      />{\" \"}\n      {text}\n    </div>\n  );\n}\n\nexport type GetStringKeys<T> = Extract<keyof T, string>;\n"],"sourceRoot":""}